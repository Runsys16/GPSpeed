#ifndef SCREEN_RECHERCHE_CPP
#define SCREEN_RECHERCHE_CPP
//---------------------------------------------------------------------------------------------------------------------------------------------------
//
//---------------------------------------------------------------------------------------------------------------------------------------------------
#include "screen_recherche.h"
#include "Free_Fonts.h"
#include "sat.h"
//---------------------------------------------------------------------------------------------------------------------------------------------------
//
//---------------------------------------------------------------------------------------------------------------------------------------------------
ScreenRecherche::ScreenRecherche(TFT_eSPI* _tft) : Screen::Screen(_tft)
{
    uTime = millis();
}
//---------------------------------------------------------------------------------------------------------------------------------------------------
//
//---------------------------------------------------------------------------------------------------------------------------------------------------
void ScreenRecherche::print(void)
{
  update();

  //bUpdate = false;
  bAff = false;
  bEff = false;
}
//---------------------------------------------------------------------------------------------------------------------------------------------------
//
//---------------------------------------------------------------------------------------------------------------------------------------------------
void ScreenRecherche::update(void)
{
  unsigned long uCurrent = millis();

  if ( uCurrent > (uTime+500) )
  {
    if ( !bAff ){
      unsigned x = (tft->width()  - 128) / 2;
      unsigned y = (tft->height() - 96) / 2;

      tft->setSwapBytes(true);
      tft->pushImage(x, y, 128, 96, mire);

      bAff = true;
      bEff = false;
    }
  }
  else
  {
    if ( !bEff ){
      tft->fillScreen(TFT_BLACK);

      bAff = false;
      bEff = true;
    }
  }
  
  if ( uCurrent > (uTime+1500) )      uTime = uCurrent;

}

#endif
